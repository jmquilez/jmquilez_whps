<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<link
  href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Asap&family=Outfit:wght@700&family=Praise&family=Varela+Round&display=swap"
  rel="stylesheet">
{{> header}}
<script>
  /*$(document).ready(function() {
  $("#thebuts").on("click", function() {
    $("#video").html("<source src='"+ $("#https://storage.googleapis.com/jmquilez/11fb303b-b49c-4467-bc71-0de1385ecf7c/11fb303b-b49c-4467-bc71-0de1385ecf7c.m3u8").val() +"' type='application/x-mpegURL'>");
    var ply = videojs("video");
    ply.play();
  });
});*/
  /*$(document).ready(function() {
    $("#thebuts").on("click", function() {
      $("#video").html("<source src='https://storage.googleapis.com/jmquilez/11fb303b-b49c-4467-bc71-0de1385ecf7c/11fb303b-b49c-4467-bc71-0de1385ecf7c.m3u8' type='application/x-mpegURL'>");
      var ply = videojs("video");
      ply.play();
      console.log('play?')
    });
  });*/
  function playIt() {
    const dosc = document.getElementById("vids")
    if (dosc.paused) {
      dosc.play()
      console.log("plays")
    } else {
      dosc.pause()
      console.log("notplays")
    }
  }
  function doit() {
    console.log('doitaj!')
  }
  function onload() {
    alert('window just loaded');
  }
  function createNoHLS(nail, url) {
    console.log('no hls poster: ' + nail);
    console.log('no hls url: ' + url);
  }
  window.onload = onload;
  function createIt(id, url, nail) {
    console.log('nail');
    console.log(nail)
    function getOS() {
      var userAgent = window.navigator.userAgent,
        platform = window.navigator.platform,
        macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],
        windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],
        iosPlatforms = ['iPhone', 'iPad', 'iPod'],
        os = null;

      if (macosPlatforms.indexOf(platform) !== -1) {
        os = 'Mac OS';
      } else if (iosPlatforms.indexOf(platform) !== -1) {
        os = 'iOS';
      } else if (windowsPlatforms.indexOf(platform) !== -1) {
        os = 'Windows';
      } else if (/Android/.test(userAgent)) {
        os = 'Android';
      } else if (!os && /Linux/.test(platform)) {
        os = 'Linux';
      }

      return os;
    }

    alert(getOS());


    var video = document.getElementById(id);
    video.setAttribute("controls", "controls");
    var span = video.firstChild;
    console.log('span element: ' + span.id);
    span.remove();

    if (video.paused == true) {
      $(`#${id}`).html(`<source src="${url}" type='application/x-mpegURL'>`);

      var vids = videojs(id);
      vids.on('error', (err) => {
        console.log('player error: ');
        console.log(err);
      });
      vids.play();
    }
  }

</script>
<script>

</script>
<div class="container <!--align-items-center justify-content-center-->align-items-center justify-content-center"
  style="margin-bottom: 30px; margin-top: 30px; margin-right: auto; margin-left: auto; width: 100%; <!--display:flex; justify-content: center; flex-direction: column; align-items:center;-->">

  <div
    style="display:flex; justify-content: center; flex-direction: column; align-items:center; margin-right: auto; margin-left: auto;">
    <div class="card border-header mb-3" style="width: 60rem; padding: 1px; object-fit: contain;">
      <!--margin-top: 30px; display:flex; justify-content: center; flex-direction: column; align-items:center; margin-right: auto; margin-left: auto;-->
      <div class="card-header" style="font-family: 'Praise', cursive; font-size: 60px; text-align: center;">
        <!--id="hasc"-->{{name}}
      </div>
      <div class="card-body">
        <h4 class="card-title" style="text-align: center; font-family: 'Varela Round', sans-serif;">WHERE THE WORLD
          BUILDS SOCIAL MEDIA</h4>
        <img src="https://miro.medium.com/max/1400/1*uU4FMNjbrr3QVOyQVH8fag.jpeg"
          style="object-fit: contain; width: 100%; height: 15vw; margin-bottom: 10px;" />
        <p class="card-text" style="margin-top: 10px; text-align: center; font-family: 'Asap', sans-serif;">Start
          uploading. Now.</p>
      </div>
    </div>
    <div class="card mt-2" style="width: 55rem; display: flex;">
      <div class="card-header" style="text-align: center;">
        <h3 style="padding: 1px; margin-left: 10px; height: 40px; line-height: 50px;"><i class="far fa-images"
            style="margin-right: 10px;"></i>Every
          upload yet</h3>
      </div>
      <div class="card-body">
        <div class="row">
          {{#each posts}}
          {{#ifEquals this.filetype "image"}}
          <div class="col-md-4">
            <div class="card border-success" class="w-100 h-100"
              style="padding: 1px; object-fit: contain; margin-bottom: 20px;">
              <!--style="width: 30rem; padding: 1px; object-fit: contain;">-->

              <div class="card-header"
                style="font-family: 'Varela Round', sans-serif; font-size: {{this.text_size}}; text-align: center; height: 60px; display: table-cell; line-height: 35px;">
                <a href="/posts/{{this.id}}" class="w-100 h-100" style="text-decoration: none;">{{this.title}}</a>
              </div>

              <div class="card-body">
                <h4 class="card-title"
                  style="margin-top: -15px; text-align: center; font-family: 'Architects Daughter', cursive; font-size: {{this.author_size}}; height: 27px; line-height: 30px;">
                  By
                  {{this.author}}</h4>
                <span id='{{this.id}}span' onclick="this.onclick=null;"
                  style="width: 84.5%; height: 90px; margin-top: 0px; background-color: transparent; object-fit: contain;">
                  <img src={{this.url}}
                    style="object-fit: contain; width: 100%; height: 90px; max-height: 90px; margin-bottom: 0px;"
                    class="w-90 h-90" />
                </span>
                <!--<p class="card-text" style="margin-top: 10px; text-align: center; font-family: 'Asap', sans-serif;">
                  {{this.description}}</p>-->
              </div>
            </div>
          </div>

          {{else}}
          {{#ifEquals this.isHLSCoded false }}
          <div class="col-md-4">
            <div class="card border-success mb-3" class="w-100 h-100"
              style="padding: 1px; object-fit: contain; margin-bottom: 20px;">
              <!--style="width: 30rem; padding: 1px; object-fit: contain;">-->

              <div class="card-header"
                style="font-family: 'Varela Round', sans-serif; font-size: {{this.text_size}}; text-align: center; height: 60px; display: table-cell; line-height: 35px;">
                <a href="/posts/{{this.id}}" class="w-100 h-100" style="text-decoration: none;">{{this.title}}</a>
              </div>

              <div class="card-body"
                style="display: flex; flex-direction: column; align-items: center; background-color: transparent;">

                <h4 class="card-title"
                  style="margin-top: -15px; text-align: center; font-family: 'Architects Daughter', cursive; font-size: {{this.author_size}}; height: 27px; line-height: 30px;">
                  By
                  {{this.author}}</h4>
                <!--<h4 class="card-title" style="text-align: center; font-family: 'Architects Daughter', cursive;">By
                  {{this.author}}</h4>-->
                <!-- width for span: 84.5% -->
                <span id='{{this.id}}span' onclick="this.onclick=null;"
                  style="width: 100%; height: 90px; margin-top: 0px; background-color: transparent; color: red; object-fit: contain;">
                  <video controls playsinline loop class="w-90 h-90"
                    style="object-fit: contain; width: 100%; height: 90px; max-height: 90px; margin-bottom: 0px; background-color: transparent;"
                    poster={{this.thumbURL}}>
                    <!--<source type="video/x-mpegURL" src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4">-->
                    <source type="video/{{this.extension}}" src={{this.url}}>
                  </video>
                </span>
                <!--<p class="card-text" style="margin-top: 10px; text-align: center; font-family: 'Asap', sans-serif;">
                  {{this.description}}</p>-->

              </div>
            </div>
          </div>

          {{else}}

          <!--<video id="vids"-->
          <!--class="video" controls="true"-->
          <!--controls playsinline autoplay muted loop-->
          <!--preload="auto" type='video/{{this.extension}}; codecs="avc1.42E01E, mp4a.40.2"-->
          <!--style="object-fit: contain; width: 100%; height: 15vw; margin-bottom: 10px;" >-->
          <!--<source src={{this.url}} type="video/{{this.extension}}">
        </video>-->
          <div class="col-md-4">
            <div class="card border-success mb-3" class="w-100 h-100"
              style="padding: 1px; object-fit: contain; margin-bottom: 20px;">
              <!--style="width: 30rem; padding: 1px; object-fit: contain;"-->

              <div class="card-header"
                style="font-family: 'Varela Round', sans-serif; font-size: {{this.text_size}}; text-align: center; height: 60px; display: table-cell; line-height: 35px;">
                <a href="/posts/{{this.id}}" class="w-100 h-100" style="text-decoration: none;">{{this.title}}</a>
              </div>

              <div class="card-body"
                style="display: flex; flex-direction: column; align-items: center; background-color: transparent;">

                <h4 class="card-title"
                  style="margin-top: -15px; text-align: center; font-family: 'Architects Daughter', cursive; font-size: {{this.author_size}}; height: 27px; line-height: 30px;">
                  By
                  {{this.author}}</h4>

                <span id='{{this.id}}span'
                  onclick="createIt('{{this.id}}', '{{this.url}}', '{{this.thumbURL}}'); this.onclick=null;"
                  style="width: 100%; height: 90px; margin-top: 0px; background-color: transparent; object-fit: contain; color: transparent;">
                  <video playsinline muted loop class="video-js vjs-theme-sea w-90 h-90" preload="none"
                    crossorigin="true"
                    style="object-fit: contain; width: 100%; height: 100%; max-height: 90px; margin-bottom: 0px; background-color: transparent;"
                    id={{this.id}} poster={{this.thumbURL}}>

                  </video>
                </span>
                <!--data-setup='{"fluid": true}'-->
                <!--<button type="button" class="btn btn-secondary"
                  onclick="createIt('{{this.id}}', '{{this.url}}', '{{this.thumbURL}}')"
                  style="margin-left: auto; margin-right: auto;">Play video</button>-->

                <!--<p class="card-text" style="margin-top: 10px; text-align: center; font-family: 'Asap', sans-serif;">
                  {{this.description}}</p>-->
              </div>
            </div>
          </div>


          {{/ifEquals}}
          <!--<button type="button" onclick="playIt()" class="btn btn-primary">Primary</button>-->
          {{/ifEquals}}
          {{/each}}
        </div>
      </div>
    </div>

    <!--<video id="video12" class="video-js vjs-default-skin" preload="auto" crossorigin="true" controls width="640"
      height="268" controls>-->
    <!--</video>-->
  </div>

</div>

<!--<video id="video" class="video-js vjs-default-skin" preload="auto" crossorigin="true" controls width="640" height="268"
  controls>
</video>

<video id="video1" class="video-js vjs-default-skin" preload="auto" crossorigin="true" controls width="640" height="268"
  controls>
</video>-->